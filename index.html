<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ConnecTHOR v2.0 - Real-Time Geopolitical Intelligence</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/react-globe.gl@2.27.2"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0a0f1a;
      --bg-secondary: rgba(15, 23, 42, 0.9);
      --bg-card: rgba(15, 23, 42, 0.85);
      --bg-hover: rgba(30, 41, 59, 0.8);
      --border: rgba(71, 85, 105, 0.4);
      --text-primary: #f1f5f9;
      --text-muted: #94a3b8;
      --accent-blue: #3b82f6;
      --accent-purple: #8b5cf6;
      --accent-green: #22c55e;
      --accent-red: #ef4444;
      --accent-yellow: #eab308;
      --accent-orange: #f97316;
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      overflow: hidden;
      height: 100vh;
    }
    
    #root { height: 100%; }
    
    /* Main Layout */
    .app-container {
      display: grid;
      grid-template-rows: auto 1fr auto;
      grid-template-columns: 320px 1fr 350px;
      grid-template-areas:
        "header header header"
        "left globe right"
        "ticker ticker ticker";
      height: 100vh;
      gap: 0;
    }
    
    /* Header */
    .header {
      grid-area: header;
      background: linear-gradient(to bottom, var(--bg-primary), rgba(10,15,26,0.95));
      border-bottom: 1px solid var(--border);
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      z-index: 100;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .logo-icon {
      font-size: 28px;
      filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.6));
      animation: logoPulse 3s infinite;
    }
    
    @keyframes logoPulse {
      0%, 100% { filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.6)); }
      50% { filter: drop-shadow(0 0 20px rgba(139, 92, 246, 0.8)); }
    }
    
    .logo h1 {
      font-size: 20px;
      font-weight: 800;
      background: linear-gradient(135deg, #3b82f6, #8b5cf6, #ec4899);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: -0.5px;
    }
    
    .logo-version {
      font-size: 10px;
      color: var(--accent-purple);
      background: rgba(139, 92, 246, 0.15);
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
    }
    
    .header-stats {
      display: flex;
      gap: 20px;
    }
    
    .header-stat {
      text-align: center;
    }
    
    .header-stat-value {
      font-size: 18px;
      font-weight: 700;
    }
    
    .header-stat-value.live {
      color: var(--accent-green);
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .header-stat-label {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .live-dot {
      width: 8px;
      height: 8px;
      background: var(--accent-green);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.5); }
      50% { opacity: 0.8; box-shadow: 0 0 0 8px rgba(34, 197, 94, 0); }
    }
    
    .header-controls {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    
    .search-box {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 8px 12px;
      color: white;
      width: 200px;
      font-size: 13px;
    }
    
    .search-box:focus {
      outline: none;
      border-color: var(--accent-blue);
    }
    
    .btn {
      padding: 8px 14px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--bg-secondary);
      color: var(--text-primary);
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .btn:hover {
      background: var(--bg-hover);
      border-color: var(--accent-blue);
    }
    
    .btn.active {
      background: rgba(59, 130, 246, 0.2);
      border-color: var(--accent-blue);
      color: var(--accent-blue);
    }
    
    .btn-live {
      background: rgba(34, 197, 94, 0.15);
      border-color: rgba(34, 197, 94, 0.3);
      color: var(--accent-green);
    }
    
    .btn-live.connected {
      background: rgba(34, 197, 94, 0.25);
      box-shadow: 0 0 15px rgba(34, 197, 94, 0.3);
    }
    
    /* Left Panel - Markets */
    .left-panel {
      grid-area: left;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    .panel-header {
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .panel-title {
      font-size: 13px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .panel-badge {
      background: var(--accent-blue);
      color: white;
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 10px;
      font-weight: 600;
    }
    
    /* Source Tabs */
    .source-tabs {
      display: flex;
      padding: 8px;
      gap: 4px;
      border-bottom: 1px solid var(--border);
    }
    
    .source-tab {
      flex: 1;
      padding: 6px 8px;
      border-radius: 6px;
      border: none;
      background: transparent;
      color: var(--text-muted);
      font-size: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .source-tab:hover {
      background: var(--bg-hover);
      color: white;
    }
    
    .source-tab.active {
      background: var(--accent-blue);
      color: white;
    }
    
    .source-tab.polymarket.active { background: #6366f1; }
    .source-tab.manifold.active { background: #8b5cf6; }
    .source-tab.metaculus.active { background: #06b6d4; }
    
    /* Category Tabs */
    .category-tabs {
      display: flex;
      padding: 8px;
      gap: 4px;
      flex-wrap: wrap;
      border-bottom: 1px solid var(--border);
    }
    
    .category-tab {
      padding: 5px 10px;
      border-radius: 6px;
      border: none;
      background: transparent;
      color: var(--text-muted);
      font-size: 11px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .category-tab:hover {
      background: var(--bg-hover);
    }
    
    .category-tab.active {
      background: rgba(59, 130, 246, 0.2);
      color: var(--accent-blue);
    }
    
    .category-tab.trump.active {
      background: rgba(220, 38, 38, 0.2);
      color: #f87171;
    }
    
    /* Markets List */
    .markets-list {
      flex: 1;
      overflow-y: auto;
      padding: 8px;
    }
    
    .market-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 12px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .market-card:hover {
      border-color: var(--accent-blue);
      transform: translateX(4px);
    }
    
    .market-card.selected {
      border-color: var(--accent-blue);
      background: rgba(59, 130, 246, 0.1);
    }
    
    .market-card.trump {
      border-left: 3px solid var(--accent-red);
    }
    
    .market-source {
      font-size: 9px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 4px;
    }
    
    .market-source.polymarket { color: #818cf8; }
    .market-source.manifold { color: #a78bfa; }
    .market-source.metaculus { color: #22d3ee; }
    
    .market-question {
      font-size: 12px;
      font-weight: 600;
      line-height: 1.4;
      margin-bottom: 8px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .market-stats {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .market-prob {
      font-size: 18px;
      font-weight: 800;
    }
    
    .market-prob.high { color: var(--accent-green); }
    .market-prob.medium { color: var(--accent-yellow); }
    .market-prob.low { color: var(--accent-red); }
    
    .market-volume {
      font-size: 11px;
      color: var(--text-muted);
    }
    
    .market-change {
      font-size: 11px;
      font-weight: 600;
      padding: 2px 6px;
      border-radius: 4px;
    }
    
    .market-change.up {
      color: var(--accent-green);
      background: rgba(34, 197, 94, 0.15);
    }
    
    .market-change.down {
      color: var(--accent-red);
      background: rgba(239, 68, 68, 0.15);
    }
    
    /* Globe Area */
    .globe-area {
      grid-area: globe;
      position: relative;
      background: radial-gradient(ellipse at center, #1a1f35 0%, #0a0f1a 100%);
      overflow: hidden;
    }
    
    .globe-container {
      width: 100%;
      height: 100%;
    }
    
    /* Spotlight Banner */
    .spotlight-banner {
      position: absolute;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 50;
      display: flex;
      align-items: center;
      gap: 12px;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2));
      backdrop-filter: blur(16px);
      border: 1px solid rgba(59, 130, 246, 0.3);
      border-radius: 50px;
      padding: 10px 20px;
      animation: spotlightIn 0.5s ease-out;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .spotlight-banner:hover {
      border-color: var(--accent-blue);
      box-shadow: 0 0 30px rgba(59, 130, 246, 0.4);
    }
    
    @keyframes spotlightIn {
      from { opacity: 0; transform: translateX(-50%) translateY(20px); }
      to { opacity: 1; transform: translateX(-50%) translateY(0); }
    }
    
    .spotlight-dot {
      width: 8px;
      height: 8px;
      background: var(--accent-blue);
      border-radius: 50%;
      animation: pulse 1s infinite;
    }
    
    .spotlight-label {
      font-size: 10px;
      font-weight: 700;
      color: var(--accent-blue);
      letter-spacing: 1px;
    }
    
    .spotlight-text {
      font-size: 13px;
      color: white;
      max-width: 350px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .spotlight-prob {
      font-size: 16px;
      font-weight: 800;
    }
    
    /* Selected Market Detail */
    .market-detail {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 60;
      background: var(--bg-card);
      backdrop-filter: blur(16px);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 16px 24px;
      min-width: 400px;
      max-width: 500px;
    }
    
    .market-detail-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
    }
    
    .market-detail-close {
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      font-size: 18px;
    }
    
    .market-detail-question {
      font-size: 14px;
      font-weight: 700;
      line-height: 1.4;
      flex: 1;
      margin-right: 12px;
    }
    
    .market-detail-stats {
      display: flex;
      gap: 24px;
    }
    
    .market-detail-stat {
      text-align: center;
    }
    
    .market-detail-stat-value {
      font-size: 24px;
      font-weight: 800;
    }
    
    .market-detail-stat-label {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
    }
    
    .market-detail-link {
      display: inline-block;
      margin-top: 12px;
      color: var(--accent-blue);
      font-size: 12px;
      text-decoration: none;
    }
    
    .market-detail-link:hover {
      text-decoration: underline;
    }
    
    /* Right Panel - Activity */
    .right-panel {
      grid-area: right;
      background: var(--bg-secondary);
      border-left: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    /* Activity Tabs */
    .activity-tabs {
      display: flex;
      border-bottom: 1px solid var(--border);
    }
    
    .activity-tab {
      flex: 1;
      padding: 12px;
      border: none;
      background: transparent;
      color: var(--text-muted);
      font-size: 11px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border-bottom: 2px solid transparent;
    }
    
    .activity-tab:hover {
      color: white;
      background: var(--bg-hover);
    }
    
    .activity-tab.active {
      color: var(--accent-blue);
      border-bottom-color: var(--accent-blue);
    }
    
    /* Activity Feed */
    .activity-feed {
      flex: 1;
      overflow-y: auto;
      padding: 8px;
    }
    
    .activity-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 4px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    .activity-item.whale {
      border-color: var(--accent-yellow);
      background: rgba(234, 179, 8, 0.1);
    }
    
    .activity-icon {
      font-size: 16px;
    }
    
    .activity-content {
      flex: 1;
      min-width: 0;
    }
    
    .activity-title {
      font-size: 11px;
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .activity-meta {
      font-size: 10px;
      color: var(--text-muted);
      display: flex;
      gap: 8px;
    }
    
    .activity-amount {
      font-size: 12px;
      font-weight: 700;
    }
    
    .activity-amount.buy { color: var(--accent-green); }
    .activity-amount.sell { color: var(--accent-red); }
    
    .activity-time {
      font-size: 10px;
      color: var(--text-muted);
    }
    
    /* News Feed */
    .news-feed {
      flex: 1;
      overflow-y: auto;
      padding: 8px;
    }
    
    .news-item {
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 6px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .news-item:hover {
      border-color: var(--accent-blue);
    }
    
    .news-item.breaking {
      border-left: 3px solid var(--accent-red);
      animation: newsFlash 2s ease-out;
    }
    
    @keyframes newsFlash {
      0% { background: rgba(239, 68, 68, 0.2); }
      100% { background: var(--bg-card); }
    }
    
    .news-source {
      font-size: 9px;
      font-weight: 600;
      color: var(--accent-blue);
      text-transform: uppercase;
      margin-bottom: 4px;
    }
    
    .news-title {
      font-size: 12px;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .news-time {
      font-size: 10px;
      color: var(--text-muted);
      margin-top: 4px;
    }
    
    /* News Ticker */
    .news-ticker {
      grid-area: ticker;
      background: linear-gradient(90deg, rgba(220, 38, 38, 0.2), rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.2));
      border-top: 1px solid rgba(239, 68, 68, 0.3);
      padding: 8px 0;
      overflow: hidden;
      display: flex;
      align-items: center;
    }
    
    .ticker-label {
      background: var(--accent-red);
      color: white;
      padding: 4px 12px;
      font-size: 10px;
      font-weight: 700;
      margin-right: 16px;
      flex-shrink: 0;
      animation: tickerPulse 2s infinite;
    }
    
    @keyframes tickerPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    .ticker-content {
      display: flex;
      animation: tickerScroll 60s linear infinite;
      white-space: nowrap;
    }
    
    @keyframes tickerScroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    
    .ticker-item {
      padding: 0 40px;
      font-size: 12px;
      color: var(--text-primary);
    }
    
    .ticker-item::after {
      content: 'â€¢';
      margin-left: 40px;
      color: var(--accent-red);
    }
    
    /* Loading */
    .loading-screen {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: var(--bg-primary);
    }
    
    .loading-icon {
      font-size: 64px;
      animation: loadingBounce 1s infinite;
    }
    
    @keyframes loadingBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .loading-text {
      margin-top: 16px;
      font-size: 14px;
      color: var(--text-muted);
    }
    
    .loading-bar {
      width: 200px;
      height: 3px;
      background: var(--bg-secondary);
      border-radius: 2px;
      margin-top: 16px;
      overflow: hidden;
    }
    
    .loading-progress {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
      animation: loadingProgress 2s ease-out forwards;
    }
    
    @keyframes loadingProgress {
      0% { width: 0; }
      100% { width: 100%; }
    }
    
    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
    
    /* Connection Status */
    .connection-status {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 50;
      display: flex;
      gap: 8px;
    }
    
    .connection-badge {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 10px;
      font-weight: 600;
      background: var(--bg-card);
      border: 1px solid var(--border);
    }
    
    .connection-badge.connected {
      border-color: var(--accent-green);
      color: var(--accent-green);
    }
    
    .connection-badge.error {
      border-color: var(--accent-red);
      color: var(--accent-red);
    }
    
    /* Responsive */
    @media (max-width: 1200px) {
      .app-container {
        grid-template-columns: 280px 1fr 300px;
      }
    }
    
    @media (max-width: 900px) {
      .app-container {
        grid-template-columns: 1fr;
        grid-template-rows: auto 1fr auto auto;
        grid-template-areas:
          "header"
          "globe"
          "left"
          "ticker";
      }
      .right-panel { display: none; }
      .left-panel { max-height: 300px; }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect, useRef, useCallback, useMemo } = React;
    const Globe = window.Globe;

    // ==================== API CONFIGURATIONS ====================
    const API = {
      POLYMARKET: {
        REST: 'https://gamma-api.polymarket.com',
        WS: 'wss://ws-subscriptions-clob.polymarket.com/ws/market',
        CORS_PROXIES: [
          '',
          'https://corsproxy.io/?',
          'https://api.allorigins.win/raw?url=',
        ]
      },
      MANIFOLD: {
        REST: 'https://api.manifold.markets/v0',
      },
      NEWS: {
        RSS_PROXY: 'https://api.rss2json.com/v1/api.json?rss_url=',
        FEEDS: [
          'https://feeds.bbci.co.uk/news/world/rss.xml',
          'https://rss.nytimes.com/services/xml/rss/nyt/World.xml',
          'https://feeds.reuters.com/Reuters/worldNews',
        ]
      }
    };

    // ==================== LOCATION DATABASE ====================
    const LOCATIONS = {
      'trump': { lat: 38.9, lng: -77, country: 'USA', region: 'Americas' },
      'biden': { lat: 38.9, lng: -77, country: 'USA', region: 'Americas' },
      'usa': { lat: 39.8, lng: -98.5, country: 'USA', region: 'Americas' },
      'america': { lat: 39.8, lng: -98.5, country: 'USA', region: 'Americas' },
      'fed': { lat: 38.89, lng: -77.04, country: 'USA', region: 'Americas' },
      'congress': { lat: 38.89, lng: -77.01, country: 'USA', region: 'Americas' },
      'white house': { lat: 38.9, lng: -77.04, country: 'USA', region: 'Americas' },
      'tariff': { lat: 38.9, lng: -77, country: 'USA', region: 'Americas' },
      'ukraine': { lat: 48.38, lng: 31.17, country: 'Ukraine', region: 'Europe' },
      'russia': { lat: 55.76, lng: 37.62, country: 'Russia', region: 'Europe' },
      'putin': { lat: 55.76, lng: 37.62, country: 'Russia', region: 'Europe' },
      'china': { lat: 39.9, lng: 116.4, country: 'China', region: 'Asia' },
      'taiwan': { lat: 25.03, lng: 121.57, country: 'Taiwan', region: 'Asia' },
      'iran': { lat: 35.69, lng: 51.39, country: 'Iran', region: 'Middle East' },
      'israel': { lat: 31.77, lng: 35.22, country: 'Israel', region: 'Middle East' },
      'gaza': { lat: 31.5, lng: 34.47, country: 'Gaza', region: 'Middle East' },
      'germany': { lat: 52.52, lng: 13.41, country: 'Germany', region: 'Europe' },
      'france': { lat: 48.86, lng: 2.35, country: 'France', region: 'Europe' },
      'uk': { lat: 51.51, lng: -0.13, country: 'UK', region: 'Europe' },
      'britain': { lat: 51.51, lng: -0.13, country: 'UK', region: 'Europe' },
      'nato': { lat: 50.85, lng: 4.36, country: 'NATO', region: 'Europe' },
      'eu': { lat: 50.85, lng: 4.35, country: 'EU', region: 'Europe' },
      'venezuela': { lat: 10.5, lng: -66.9, country: 'Venezuela', region: 'Americas' },
      'brazil': { lat: -15.8, lng: -47.9, country: 'Brazil', region: 'Americas' },
      'india': { lat: 28.61, lng: 77.21, country: 'India', region: 'Asia' },
      'japan': { lat: 35.68, lng: 139.69, country: 'Japan', region: 'Asia' },
      'korea': { lat: 37.57, lng: 126.98, country: 'South Korea', region: 'Asia' },
      'north korea': { lat: 39.03, lng: 125.75, country: 'North Korea', region: 'Asia' },
      'bitcoin': { lat: 37.77, lng: -122.42, country: 'Global', region: 'Americas' },
      'crypto': { lat: 37.77, lng: -122.42, country: 'Global', region: 'Americas' },
      'greenland': { lat: 71.71, lng: -42.6, country: 'Greenland', region: 'Americas' },
      'canada': { lat: 45.42, lng: -75.69, country: 'Canada', region: 'Americas' },
      'mexico': { lat: 19.43, lng: -99.13, country: 'Mexico', region: 'Americas' },
      'syria': { lat: 33.51, lng: 36.29, country: 'Syria', region: 'Middle East' },
      'saudi': { lat: 24.71, lng: 46.68, country: 'Saudi Arabia', region: 'Middle East' },
      'turkey': { lat: 39.93, lng: 32.86, country: 'Turkey', region: 'Europe' },
      'poland': { lat: 52.23, lng: 21.01, country: 'Poland', region: 'Europe' },
      'australia': { lat: -35.28, lng: 149.13, country: 'Australia', region: 'Oceania' },
      'africa': { lat: -1.29, lng: 36.82, country: 'Kenya', region: 'Africa' },
      'nigeria': { lat: 9.08, lng: 7.4, country: 'Nigeria', region: 'Africa' },
      'south africa': { lat: -25.75, lng: 28.19, country: 'South Africa', region: 'Africa' },
      'argentina': { lat: -34.6, lng: -58.38, country: 'Argentina', region: 'Americas' },
      'election': { lat: 38.9, lng: -77, country: 'USA', region: 'Americas' },
      'war': { lat: 48.38, lng: 31.17, country: 'Ukraine', region: 'Europe' },
      'military': { lat: 38.87, lng: -77.06, country: 'USA', region: 'Americas' },
    };

    // ==================== DATA FETCHING ====================
    
    // Fetch from Polymarket
    async function fetchPolymarket() {
      for (const proxy of API.POLYMARKET.CORS_PROXIES) {
        try {
          const baseUrl = `${API.POLYMARKET.REST}/events?closed=false&active=true&limit=100`;
          const url = proxy ? proxy + encodeURIComponent(baseUrl) : baseUrl;
          
          const res = await fetch(url, { 
            signal: AbortSignal.timeout(10000) 
          });
          
          if (!res.ok) continue;
          const events = await res.json();
          
          if (!Array.isArray(events)) continue;
          
          return events.flatMap(event => {
            if (!event.markets?.length) return [];
            return event.markets.map(m => ({
              id: m.id || m.conditionId,
              question: event.title || m.question,
              probability: parseFloat(m.outcomePrices?.split(',')[0] || 0.5),
              volume: parseFloat(m.volume || 0),
              source: 'polymarket',
              slug: m.slug || event.slug,
              endDate: m.endDate || event.endDate,
              url: `https://polymarket.com/event/${event.slug}`,
            }));
          });
        } catch (e) {
          console.log('Polymarket fetch failed, trying next proxy...');
        }
      }
      return [];
    }
    
    // Fetch from Manifold Markets
    async function fetchManifold() {
      try {
        const res = await fetch(`${API.MANIFOLD.REST}/markets?limit=50&sort=liquidity`, {
          signal: AbortSignal.timeout(10000)
        });
        
        if (!res.ok) return [];
        const markets = await res.json();
        
        return markets
          .filter(m => m.outcomeType === 'BINARY')
          .map(m => ({
            id: `manifold-${m.id}`,
            question: m.question,
            probability: m.probability || 0.5,
            volume: m.volume || 0,
            source: 'manifold',
            slug: m.slug,
            url: m.url,
            creatorName: m.creatorName,
          }));
      } catch (e) {
        console.log('Manifold fetch failed:', e.message);
        return [];
      }
    }
    
    // Fetch news from RSS feeds
    async function fetchNews() {
      const allNews = [];
      
      for (const feedUrl of API.NEWS.FEEDS) {
        try {
          const res = await fetch(API.NEWS.RSS_PROXY + encodeURIComponent(feedUrl), {
            signal: AbortSignal.timeout(8000)
          });
          
          if (!res.ok) continue;
          const data = await res.json();
          
          if (data.items) {
            data.items.slice(0, 5).forEach(item => {
              allNews.push({
                id: `news-${Date.now()}-${Math.random()}`,
                title: item.title?.replace(/<[^>]+>/g, '') || '',
                source: data.feed?.title || 'News',
                url: item.link,
                time: new Date(item.pubDate),
                isBreaking: Date.now() - new Date(item.pubDate).getTime() < 3600000, // < 1 hour
              });
            });
          }
        } catch (e) {
          console.log('News feed failed:', e.message);
        }
      }
      
      return allNews
        .sort((a, b) => b.time - a.time)
        .slice(0, 20);
    }
    
    // Get location from market question
    function getMarketLocation(question) {
      const q = question.toLowerCase();
      
      for (const [keyword, loc] of Object.entries(LOCATIONS)) {
        if (q.includes(keyword)) {
          return {
            ...loc,
            lat: loc.lat + (Math.random() - 0.5) * 2,
            lng: loc.lng + (Math.random() - 0.5) * 2,
          };
        }
      }
      return null;
    }
    
    // Determine category
    function getCategory(question) {
      const q = question.toLowerCase();
      if (q.includes('trump') || q.includes('maga') || q.includes('republican')) return 'Trump';
      if (q.includes('war') || q.includes('military') || q.includes('conflict') || q.includes('strike')) return 'Conflict';
      if (q.includes('bitcoin') || q.includes('crypto') || q.includes('fed') || q.includes('economy') || q.includes('recession')) return 'Economy';
      if (q.includes('tariff') || q.includes('trade') || q.includes('sanction')) return 'Trade';
      return 'Politics';
    }
    
    // Format helpers
    const formatProb = (p) => `${Math.round(p * 100)}%`;
    const formatVolume = (v) => {
      if (v >= 1e6) return `$${(v / 1e6).toFixed(1)}M`;
      if (v >= 1e3) return `$${(v / 1e3).toFixed(0)}K`;
      return `$${v.toFixed(0)}`;
    };
    const formatTime = (date) => {
      const diff = Date.now() - new Date(date).getTime();
      const mins = Math.floor(diff / 60000);
      const hours = Math.floor(mins / 60);
      if (hours > 0) return `${hours}h ago`;
      if (mins > 0) return `${mins}m ago`;
      return 'Just now';
    };

    // ==================== GLOBE ANIMATION GENERATORS ====================
    
    function generateArcs(markets) {
      const dcLat = 38.9, dcLng = -77;
      return markets
        .filter(m => m.volume > 500000 && m.lat && Math.abs(m.lat - dcLat) > 5)
        .slice(0, 12)
        .map((m, i) => ({
          startLat: dcLat,
          startLng: dcLng,
          endLat: m.lat,
          endLng: m.lng,
          color: m.category === 'Trump' ? ['rgba(239,68,68,0.8)', 'rgba(239,68,68,0.2)'] :
                 m.category === 'Conflict' ? ['rgba(249,115,22,0.8)', 'rgba(249,115,22,0.2)'] :
                 ['rgba(59,130,246,0.8)', 'rgba(139,92,246,0.2)'],
          stroke: 0.8 + Math.min(m.volume / 10000000, 1.5),
          dashLength: 0.4,
          dashGap: 0.2,
          dashAnimateTime: 1500 + (i % 5) * 300,
          altitude: 0.12 + (i % 3) * 0.06,
        }));
    }
    
    function generateRings(markets, highlighted) {
      const rings = markets
        .filter(m => (m.volume > 1000000 || m.category === 'Trump') && m.lat)
        .slice(0, 15)
        .map((m, i) => ({
          lat: m.lat,
          lng: m.lng,
          maxR: m.category === 'Trump' ? 3.5 : 2,
          propagationSpeed: 1.5 + (i % 3) * 0.5,
          repeatPeriod: 1200 + (i % 4) * 300,
          color: m.probability > 0.7 ? 'rgba(34,197,94,0.5)' :
                 m.probability < 0.3 ? 'rgba(239,68,68,0.5)' :
                 'rgba(245,158,11,0.5)',
        }));
      
      // Add highlight ring
      if (highlighted?.lat) {
        rings.unshift({
          lat: highlighted.lat,
          lng: highlighted.lng,
          maxR: 5,
          propagationSpeed: 3,
          repeatPeriod: 800,
          color: 'rgba(255,255,255,0.7)',
        });
      }
      
      return rings;
    }

    // ==================== SIMULATED ACTIVITY GENERATOR ====================
    
    function generateActivity(markets) {
      if (markets.length === 0) return [];
      
      const activities = [];
      const actions = ['BUY', 'SELL'];
      const amounts = [500, 1000, 2500, 5000, 10000, 25000];
      
      for (let i = 0; i < 10; i++) {
        const market = markets[Math.floor(Math.random() * Math.min(markets.length, 20))];
        const action = actions[Math.floor(Math.random() * 2)];
        const amount = amounts[Math.floor(Math.random() * amounts.length)];
        const isWhale = amount >= 10000;
        
        activities.push({
          id: `activity-${Date.now()}-${i}`,
          market: market.question.substring(0, 40) + '...',
          action,
          amount,
          isWhale,
          time: new Date(Date.now() - Math.random() * 300000), // Last 5 mins
          source: market.source,
        });
      }
      
      return activities.sort((a, b) => b.time - a.time);
    }

    // ==================== MAIN APP COMPONENT ====================
    
    function ConnecTHORApp() {
      const globeEl = useRef();
      
      // Data states
      const [markets, setMarkets] = useState([]);
      const [news, setNews] = useState([]);
      const [activities, setActivities] = useState([]);
      const [loading, setLoading] = useState(true);
      const [loadingText, setLoadingText] = useState('Initializing...');
      
      // UI states
      const [selectedMarket, setSelectedMarket] = useState(null);
      const [highlightedMarket, setHighlightedMarket] = useState(null);
      const [searchQuery, setSearchQuery] = useState('');
      const [selectedSource, setSelectedSource] = useState('all');
      const [selectedCategory, setSelectedCategory] = useState('All');
      const [activityTab, setActivityTab] = useState('activity');
      const [countries, setCountries] = useState({ features: [] });
      
      // Connection states
      const [isConnected, setIsConnected] = useState(false);
      const [lastUpdate, setLastUpdate] = useState(null);
      
      // Load all data
      useEffect(() => {
        async function loadData() {
          setLoadingText('Fetching Polymarket data...');
          const polymarketData = await fetchPolymarket();
          
          setLoadingText('Fetching Manifold Markets...');
          const manifoldData = await fetchManifold();
          
          setLoadingText('Processing markets...');
          const allMarkets = [...polymarketData, ...manifoldData]
            .map(m => {
              const location = getMarketLocation(m.question);
              if (!location) return null;
              return {
                ...m,
                ...location,
                category: getCategory(m.question),
                probFormatted: formatProb(m.probability),
                volumeFormatted: formatVolume(m.volume),
              };
            })
            .filter(Boolean)
            .sort((a, b) => b.volume - a.volume);
          
          setMarkets(allMarkets);
          setActivities(generateActivity(allMarkets));
          
          setLoadingText('Fetching news...');
          const newsData = await fetchNews();
          setNews(newsData);
          
          setIsConnected(true);
          setLastUpdate(new Date());
          setLoading(false);
        }
        
        loadData();
        
        // Load country borders
        setTimeout(() => {
          fetch('https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_110m_admin_0_countries.geojson')
            .then(r => r.json())
            .then(data => setCountries(data))
            .catch(() => {});
        }, 2000);
      }, []);
      
      // Refresh data periodically
      useEffect(() => {
        if (loading) return;
        
        const interval = setInterval(async () => {
          const polymarketData = await fetchPolymarket();
          const manifoldData = await fetchManifold();
          
          const allMarkets = [...polymarketData, ...manifoldData]
            .map(m => {
              const location = getMarketLocation(m.question);
              if (!location) return null;
              return {
                ...m,
                ...location,
                category: getCategory(m.question),
                probFormatted: formatProb(m.probability),
                volumeFormatted: formatVolume(m.volume),
              };
            })
            .filter(Boolean)
            .sort((a, b) => b.volume - a.volume);
          
          setMarkets(allMarkets);
          setActivities(generateActivity(allMarkets));
          setLastUpdate(new Date());
        }, 60000); // Every minute
        
        return () => clearInterval(interval);
      }, [loading]);
      
      // Spotlight rotation
      useEffect(() => {
        if (markets.length === 0) return;
        
        const interval = setInterval(() => {
          const candidates = markets.filter(m => m.volume > 500000);
          if (candidates.length > 0) {
            const market = candidates[Math.floor(Math.random() * candidates.length)];
            setHighlightedMarket(market);
            setTimeout(() => setHighlightedMarket(null), 4000);
          }
        }, 8000);
        
        return () => clearInterval(interval);
      }, [markets]);
      
      // Globe controls
      useEffect(() => {
        if (!globeEl.current || loading) return;
        globeEl.current.controls().autoRotate = true;
        globeEl.current.controls().autoRotateSpeed = 0.3;
        globeEl.current.pointOfView({ lat: 30, lng: 0, altitude: 2.2 }, 1500);
      }, [loading]);
      
      useEffect(() => {
        if (!globeEl.current) return;
        if (selectedMarket) {
          globeEl.current.controls().autoRotate = false;
          globeEl.current.pointOfView({ 
            lat: selectedMarket.lat, 
            lng: selectedMarket.lng, 
            altitude: 1.5 
          }, 800);
        } else if (highlightedMarket) {
          globeEl.current.pointOfView({ 
            lat: highlightedMarket.lat, 
            lng: highlightedMarket.lng, 
            altitude: 2.0 
          }, 1500);
        }
      }, [selectedMarket, highlightedMarket]);
      
      // Filtered markets
      const filteredMarkets = useMemo(() => {
        return markets.filter(m => {
          if (searchQuery && !m.question.toLowerCase().includes(searchQuery.toLowerCase())) return false;
          if (selectedSource !== 'all' && m.source !== selectedSource) return false;
          if (selectedCategory !== 'All' && m.category !== selectedCategory) return false;
          return true;
        });
      }, [markets, searchQuery, selectedSource, selectedCategory]);
      
      // Stats
      const stats = useMemo(() => ({
        totalMarkets: markets.length,
        totalVolume: markets.reduce((s, m) => s + m.volume, 0),
        polymarketCount: markets.filter(m => m.source === 'polymarket').length,
        manifoldCount: markets.filter(m => m.source === 'manifold').length,
      }), [markets]);
      
      // Globe data
      const arcs = useMemo(() => generateArcs(filteredMarkets), [filteredMarkets]);
      const rings = useMemo(() => generateRings(filteredMarkets, highlightedMarket), [filteredMarkets, highlightedMarket]);
      
      // News ticker content
      const tickerContent = useMemo(() => {
        const items = news.slice(0, 10).map(n => n.title);
        return [...items, ...items]; // Duplicate for seamless scroll
      }, [news]);
      
      // Categories
      const categories = ['All', 'Trump', 'Politics', 'Conflict', 'Economy', 'Trade'];
      
      if (loading) {
        return (
          <div className="loading-screen">
            <div className="loading-icon">âš¡</div>
            <h2 style={{marginTop: 16, fontSize: 24, fontWeight: 800}}>ConnecTHOR</h2>
            <p className="loading-text">{loadingText}</p>
            <div className="loading-bar">
              <div className="loading-progress"></div>
            </div>
          </div>
        );
      }
      
      return (
        <div className="app-container">
          {/* Header */}
          <header className="header">
            <div className="logo">
              <span className="logo-icon">âš¡</span>
              <div>
                <h1>ConnecTHOR</h1>
              </div>
              <span className="logo-version">v2.0</span>
            </div>
            
            <div className="header-stats">
              <div className="header-stat">
                <div className="header-stat-value">{stats.totalMarkets}</div>
                <div className="header-stat-label">Markets</div>
              </div>
              <div className="header-stat">
                <div className="header-stat-value">{formatVolume(stats.totalVolume)}</div>
                <div className="header-stat-label">Volume</div>
              </div>
              <div className="header-stat">
                <div className="header-stat-value live">
                  <span className="live-dot"></span>
                  LIVE
                </div>
                <div className="header-stat-label">
                  {lastUpdate ? formatTime(lastUpdate) : 'Connecting...'}
                </div>
              </div>
            </div>
            
            <div className="header-controls">
              <input
                type="text"
                className="search-box"
                placeholder="Search markets..."
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
              />
              <button 
                className={`btn btn-live ${isConnected ? 'connected' : ''}`}
                onClick={() => window.location.reload()}
              >
                <span className="live-dot"></span>
                {isConnected ? 'Connected' : 'Reconnect'}
              </button>
            </div>
          </header>
          
          {/* Left Panel - Markets */}
          <aside className="left-panel">
            <div className="panel-header">
              <span className="panel-title">ðŸ“Š Markets</span>
              <span className="panel-badge">{filteredMarkets.length}</span>
            </div>
            
            <div className="source-tabs">
              <button 
                className={`source-tab ${selectedSource === 'all' ? 'active' : ''}`}
                onClick={() => setSelectedSource('all')}
              >
                All
              </button>
              <button 
                className={`source-tab polymarket ${selectedSource === 'polymarket' ? 'active' : ''}`}
                onClick={() => setSelectedSource('polymarket')}
              >
                Polymarket ({stats.polymarketCount})
              </button>
              <button 
                className={`source-tab manifold ${selectedSource === 'manifold' ? 'active' : ''}`}
                onClick={() => setSelectedSource('manifold')}
              >
                Manifold ({stats.manifoldCount})
              </button>
            </div>
            
            <div className="category-tabs">
              {categories.map(cat => (
                <button
                  key={cat}
                  className={`category-tab ${selectedCategory === cat ? 'active' : ''} ${cat === 'Trump' ? 'trump' : ''}`}
                  onClick={() => setSelectedCategory(cat)}
                >
                  {cat === 'Trump' ? 'ðŸ‡ºðŸ‡¸ Trump' : cat}
                </button>
              ))}
            </div>
            
            <div className="markets-list">
              {filteredMarkets.slice(0, 30).map(market => (
                <div
                  key={market.id}
                  className={`market-card ${selectedMarket?.id === market.id ? 'selected' : ''} ${market.category === 'Trump' ? 'trump' : ''}`}
                  onClick={() => setSelectedMarket(market)}
                >
                  <div className={`market-source ${market.source}`}>
                    {market.source === 'polymarket' ? 'â—† Polymarket' : 'â—‡ Manifold'}
                  </div>
                  <div className="market-question">{market.question}</div>
                  <div className="market-stats">
                    <span className={`market-prob ${market.probability >= 0.7 ? 'high' : market.probability >= 0.4 ? 'medium' : 'low'}`}>
                      {market.probFormatted}
                    </span>
                    <span className="market-volume">{market.volumeFormatted}</span>
                  </div>
                </div>
              ))}
            </div>
          </aside>
          
          {/* Globe Area */}
          <main className="globe-area">
            <div className="connection-status">
              <div className={`connection-badge ${isConnected ? 'connected' : 'error'}`}>
                <span className="live-dot" style={{width: 6, height: 6}}></span>
                {isConnected ? 'API Connected' : 'Reconnecting...'}
              </div>
            </div>
            
            {highlightedMarket && !selectedMarket && (
              <div 
                className="spotlight-banner"
                onClick={() => setSelectedMarket(highlightedMarket)}
              >
                <div className="spotlight-dot"></div>
                <span className="spotlight-label">SPOTLIGHT</span>
                <span className="spotlight-text">{highlightedMarket.question.substring(0, 45)}...</span>
                <span 
                  className="spotlight-prob"
                  style={{color: highlightedMarket.probability >= 0.6 ? 'var(--accent-green)' : highlightedMarket.probability <= 0.4 ? 'var(--accent-red)' : 'var(--accent-yellow)'}}
                >
                  {highlightedMarket.probFormatted}
                </span>
              </div>
            )}
            
            {selectedMarket && (
              <div className="market-detail">
                <div className="market-detail-header">
                  <div className="market-detail-question">{selectedMarket.question}</div>
                  <button className="market-detail-close" onClick={() => setSelectedMarket(null)}>âœ•</button>
                </div>
                <div className="market-detail-stats">
                  <div className="market-detail-stat">
                    <div 
                      className="market-detail-stat-value"
                      style={{color: selectedMarket.probability >= 0.6 ? 'var(--accent-green)' : selectedMarket.probability <= 0.4 ? 'var(--accent-red)' : 'var(--accent-yellow)'}}
                    >
                      {selectedMarket.probFormatted}
                    </div>
                    <div className="market-detail-stat-label">Probability</div>
                  </div>
                  <div className="market-detail-stat">
                    <div className="market-detail-stat-value">{selectedMarket.volumeFormatted}</div>
                    <div className="market-detail-stat-label">Volume</div>
                  </div>
                  <div className="market-detail-stat">
                    <div className="market-detail-stat-value">{selectedMarket.country}</div>
                    <div className="market-detail-stat-label">Location</div>
                  </div>
                </div>
                {selectedMarket.url && (
                  <a href={selectedMarket.url} target="_blank" rel="noopener noreferrer" className="market-detail-link">
                    View on {selectedMarket.source === 'polymarket' ? 'Polymarket' : 'Manifold'} â†’
                  </a>
                )}
              </div>
            )}
            
            <Globe
              ref={globeEl}
              globeImageUrl="//unpkg.com/three-globe/example/img/earth-blue-marble.jpg"
              bumpImageUrl="//unpkg.com/three-globe/example/img/earth-topology.png"
              backgroundImageUrl="//unpkg.com/three-globe/example/img/night-sky.png"
              
              polygonsData={countries.features || []}
              polygonCapColor={() => 'rgba(0,0,0,0)'}
              polygonSideColor={() => 'rgba(100,150,200,0.05)'}
              polygonStrokeColor={() => 'rgba(100,180,255,0.3)'}
              polygonAltitude={0.005}
              
              pointsData={filteredMarkets}
              pointLat="lat"
              pointLng="lng"
              pointAltitude={d => Math.min(0.05 + d.volume / 50000000, 0.2)}
              pointRadius={d => selectedMarket?.id === d.id || highlightedMarket?.id === d.id ? 0.6 : 0.35}
              pointColor={d => d.category === 'Trump' ? '#dc2626' : d.probability >= 0.7 ? '#22c55e' : d.probability >= 0.4 ? '#eab308' : '#ef4444'}
              pointLabel={d => `
                <div style="background:rgba(10,15,26,0.95);padding:12px 16px;border-radius:10px;border:1px solid rgba(59,130,246,0.3);max-width:280px;">
                  <div style="font-size:9px;color:#60a5fa;margin-bottom:4px;">${d.source.toUpperCase()} â€¢ ${d.country}</div>
                  <div style="font-weight:600;color:white;margin-bottom:8px;font-size:12px;">${d.question}</div>
                  <div style="display:flex;gap:16px;">
                    <div>
                      <div style="font-size:8px;color:#6b7280;">YES</div>
                      <div style="color:#22c55e;font-weight:700;font-size:16px;">${d.probFormatted}</div>
                    </div>
                    <div>
                      <div style="font-size:8px;color:#6b7280;">VOLUME</div>
                      <div style="color:white;font-weight:600;font-size:16px;">${d.volumeFormatted}</div>
                    </div>
                  </div>
                </div>
              `}
              onPointClick={setSelectedMarket}
              
              arcsData={arcs}
              arcStartLat="startLat"
              arcStartLng="startLng"
              arcEndLat="endLat"
              arcEndLng="endLng"
              arcColor="color"
              arcAltitude="altitude"
              arcStroke="stroke"
              arcDashLength="dashLength"
              arcDashGap="dashGap"
              arcDashAnimateTime="dashAnimateTime"
              
              ringsData={rings}
              ringLat="lat"
              ringLng="lng"
              ringMaxRadius="maxR"
              ringPropagationSpeed="propagationSpeed"
              ringRepeatPeriod="repeatPeriod"
              ringColor="color"
              
              atmosphereColor="#3b82f6"
              atmosphereAltitude={0.15}
            />
          </main>
          
          {/* Right Panel - Activity & News */}
          <aside className="right-panel">
            <div className="activity-tabs">
              <button 
                className={`activity-tab ${activityTab === 'activity' ? 'active' : ''}`}
                onClick={() => setActivityTab('activity')}
              >
                ðŸ”´ Live Activity
              </button>
              <button 
                className={`activity-tab ${activityTab === 'news' ? 'active' : ''}`}
                onClick={() => setActivityTab('news')}
              >
                ðŸ“° News
              </button>
            </div>
            
            {activityTab === 'activity' ? (
              <div className="activity-feed">
                {activities.map(activity => (
                  <div key={activity.id} className={`activity-item ${activity.isWhale ? 'whale' : ''}`}>
                    <span className="activity-icon">
                      {activity.isWhale ? 'ðŸ‹' : activity.action === 'BUY' ? 'ðŸ“ˆ' : 'ðŸ“‰'}
                    </span>
                    <div className="activity-content">
                      <div className="activity-title">{activity.market}</div>
                      <div className="activity-meta">
                        <span className={`activity-amount ${activity.action.toLowerCase()}`}>
                          {activity.action} ${activity.amount.toLocaleString()}
                        </span>
                        <span>â€¢</span>
                        <span>{activity.source}</span>
                      </div>
                    </div>
                    <span className="activity-time">{formatTime(activity.time)}</span>
                  </div>
                ))}
              </div>
            ) : (
              <div className="news-feed">
                {news.map(item => (
                  <a 
                    key={item.id} 
                    href={item.url} 
                    target="_blank" 
                    rel="noopener noreferrer"
                    className={`news-item ${item.isBreaking ? 'breaking' : ''}`}
                    style={{textDecoration: 'none', display: 'block'}}
                  >
                    <div className="news-source">
                      {item.isBreaking && 'ðŸ”´ '}{item.source}
                    </div>
                    <div className="news-title">{item.title}</div>
                    <div className="news-time">{formatTime(item.time)}</div>
                  </a>
                ))}
              </div>
            )}
          </aside>
          
          {/* News Ticker */}
          <div className="news-ticker">
            <span className="ticker-label">ðŸ”´ BREAKING</span>
            <div className="ticker-content">
              {tickerContent.map((item, idx) => (
                <span key={idx} className="ticker-item">{item}</span>
              ))}
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<ConnecTHORApp />);
  </script>
</body>
</html>
